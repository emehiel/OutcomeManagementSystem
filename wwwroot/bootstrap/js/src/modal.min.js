/**
 * Minified by jsDelivr using Terser v5.3.5.
 * Original file: /npm/bootstrap@5.0.0-beta3/js/src/modal.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{defineJQueryPlugin,emulateTransitionEnd,getElementFromSelector,getTransitionDurationFromElement,isVisible,isRTL,reflow,typeCheckConfig}from"./util/index";import Data from"./dom/data";import EventHandler from"./dom/event-handler";import Manipulator from"./dom/manipulator";import SelectorEngine from"./dom/selector-engine";import BaseComponent from"./base-component";const NAME="modal",DATA_KEY="bs.modal",EVENT_KEY=".bs.modal",DATA_API_KEY=".data-api",ESCAPE_KEY="Escape",Default={backdrop:!0,keyboard:!0,focus:!0},DefaultType={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean"},EVENT_HIDE="hide.bs.modal",EVENT_HIDE_PREVENTED="hidePrevented.bs.modal",EVENT_HIDDEN="hidden.bs.modal",EVENT_SHOW="show.bs.modal",EVENT_SHOWN="shown.bs.modal",EVENT_FOCUSIN="focusin.bs.modal",EVENT_RESIZE="resize.bs.modal",EVENT_CLICK_DISMISS="click.dismiss.bs.modal",EVENT_KEYDOWN_DISMISS="keydown.dismiss.bs.modal",EVENT_MOUSEUP_DISMISS="mouseup.dismiss.bs.modal",EVENT_MOUSEDOWN_DISMISS="mousedown.dismiss.bs.modal",EVENT_CLICK_DATA_API="click.bs.modal.data-api",CLASS_NAME_SCROLLBAR_MEASURER="modal-scrollbar-measure",CLASS_NAME_BACKDROP="modal-backdrop",CLASS_NAME_OPEN="modal-open",CLASS_NAME_FADE="fade",CLASS_NAME_SHOW="show",CLASS_NAME_STATIC="modal-static",SELECTOR_DIALOG=".modal-dialog",SELECTOR_MODAL_BODY=".modal-body",SELECTOR_DATA_TOGGLE='[data-bs-toggle="modal"]',SELECTOR_DATA_DISMISS='[data-bs-dismiss="modal"]',SELECTOR_FIXED_CONTENT=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",SELECTOR_STICKY_CONTENT=".sticky-top";class Modal extends BaseComponent{constructor(t,e){super(t),this._config=this._getConfig(e),this._dialog=SelectorEngine.findOne(".modal-dialog",this._element),this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._scrollbarWidth=0}static get Default(){return Default}static get DATA_KEY(){return DATA_KEY}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;this._isAnimated()&&(this._isTransitioning=!0);const e=EventHandler.trigger(this._element,EVENT_SHOW,{relatedTarget:t});this._isShown||e.defaultPrevented||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),this._adjustDialog(),this._setEscapeEvent(),this._setResizeEvent(),EventHandler.on(this._element,EVENT_CLICK_DISMISS,SELECTOR_DATA_DISMISS,(t=>this.hide(t))),EventHandler.on(this._dialog,EVENT_MOUSEDOWN_DISMISS,(()=>{EventHandler.one(this._element,EVENT_MOUSEUP_DISMISS,(t=>{t.target===this._element&&(this._ignoreBackdropClick=!0)}))})),this._showBackdrop((()=>this._showElement(t))))}hide(t){if(t&&t.preventDefault(),!this._isShown||this._isTransitioning)return;if(EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented)return;this._isShown=!1;const e=this._isAnimated();if(e&&(this._isTransitioning=!0),this._setEscapeEvent(),this._setResizeEvent(),EventHandler.off(document,EVENT_FOCUSIN),this._element.classList.remove("show"),EventHandler.off(this._element,EVENT_CLICK_DISMISS),EventHandler.off(this._dialog,EVENT_MOUSEDOWN_DISMISS),e){const t=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,"transitionend",(t=>this._hideModal(t))),emulateTransitionEnd(this._element,t)}else this._hideModal()}dispose(){[window,this._element,this._dialog].forEach((t=>EventHandler.off(t,EVENT_KEY))),super.dispose(),EventHandler.off(document,EVENT_FOCUSIN),this._config=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._isTransitioning=null,this._scrollbarWidth=null}handleUpdate(){this._adjustDialog()}_getConfig(t){return t={...Default,...t},typeCheckConfig(NAME,t,DefaultType),t}_showElement(t){const e=this._isAnimated(),i=SelectorEngine.findOne(".modal-body",this._dialog);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0,i&&(i.scrollTop=0),e&&reflow(this._element),this._element.classList.add("show"),this._config.focus&&this._enforceFocus();const s=()=>{this._config.focus&&this._element.focus(),this._isTransitioning=!1,EventHandler.trigger(this._element,EVENT_SHOWN,{relatedTarget:t})};if(e){const t=getTransitionDurationFromElement(this._dialog);EventHandler.one(this._dialog,"transitionend",s),emulateTransitionEnd(this._dialog,t)}else s()}_enforceFocus(){EventHandler.off(document,EVENT_FOCUSIN),EventHandler.on(document,EVENT_FOCUSIN,(t=>{document===t.target||this._element===t.target||this._element.contains(t.target)||this._element.focus()}))}_setEscapeEvent(){this._isShown?EventHandler.on(this._element,EVENT_KEYDOWN_DISMISS,(t=>{this._config.keyboard&&"Escape"===t.key?(t.preventDefault(),this.hide()):this._config.keyboard||"Escape"!==t.key||this._triggerBackdropTransition()})):EventHandler.off(this._element,EVENT_KEYDOWN_DISMISS)}_setResizeEvent(){this._isShown?EventHandler.on(window,EVENT_RESIZE,(()=>this._adjustDialog())):EventHandler.off(window,EVENT_RESIZE)}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._showBackdrop((()=>{document.body.classList.remove("modal-open"),this._resetAdjustments(),this._resetScrollbar(),EventHandler.trigger(this._element,EVENT_HIDDEN)}))}_removeBackdrop(){this._backdrop.parentNode.removeChild(this._backdrop),this._backdrop=null}_showBackdrop(t){const e=this._isAnimated();if(this._isShown&&this._config.backdrop){if(this._backdrop=document.createElement("div"),this._backdrop.className="modal-backdrop",e&&this._backdrop.classList.add("fade"),document.body.appendChild(this._backdrop),EventHandler.on(this._element,EVENT_CLICK_DISMISS,(t=>{this._ignoreBackdropClick?this._ignoreBackdropClick=!1:t.target===t.currentTarget&&("static"===this._config.backdrop?this._triggerBackdropTransition():this.hide())})),e&&reflow(this._backdrop),this._backdrop.classList.add("show"),!e)return void t();const i=getTransitionDurationFromElement(this._backdrop);EventHandler.one(this._backdrop,"transitionend",t),emulateTransitionEnd(this._backdrop,i)}else if(!this._isShown&&this._backdrop){this._backdrop.classList.remove("show");const i=()=>{this._removeBackdrop(),t()};if(e){const t=getTransitionDurationFromElement(this._backdrop);EventHandler.one(this._backdrop,"transitionend",i),emulateTransitionEnd(this._backdrop,t)}else i()}else t()}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(EventHandler.trigger(this._element,EVENT_HIDE_PREVENTED).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight;t||(this._element.style.overflowY="hidden"),this._element.classList.add("modal-static");const e=getTransitionDurationFromElement(this._dialog);EventHandler.off(this._element,"transitionend"),EventHandler.one(this._element,"transitionend",(()=>{this._element.classList.remove("modal-static"),t||(EventHandler.one(this._element,"transitionend",(()=>{this._element.style.overflowY=""})),emulateTransitionEnd(this._element,e))})),emulateTransitionEnd(this._element,e),this._element.focus()}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight;(!this._isBodyOverflowing&&t&&!isRTL()||this._isBodyOverflowing&&!t&&isRTL())&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),(this._isBodyOverflowing&&!t&&!isRTL()||!this._isBodyOverflowing&&t&&isRTL())&&(this._element.style.paddingRight=this._scrollbarWidth+"px")}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}_checkScrollbar(){const t=document.body.getBoundingClientRect();this._isBodyOverflowing=Math.round(t.left+t.right)<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()}_setScrollbar(){this._isBodyOverflowing&&(this._setElementAttributes(SELECTOR_FIXED_CONTENT,"paddingRight",(t=>t+this._scrollbarWidth)),this._setElementAttributes(".sticky-top","marginRight",(t=>t-this._scrollbarWidth)),this._setElementAttributes("body","paddingRight",(t=>t+this._scrollbarWidth))),document.body.classList.add("modal-open")}_setElementAttributes(t,e,i){SelectorEngine.find(t).forEach((t=>{if(t!==document.body&&window.innerWidth>t.clientWidth+this._scrollbarWidth)return;const s=t.style[e],n=window.getComputedStyle(t)[e];Manipulator.setDataAttribute(t,e,s),t.style[e]=i(Number.parseFloat(n))+"px"}))}_resetScrollbar(){this._resetElementAttributes(SELECTOR_FIXED_CONTENT,"paddingRight"),this._resetElementAttributes(".sticky-top","marginRight"),this._resetElementAttributes("body","paddingRight")}_resetElementAttributes(t,e){SelectorEngine.find(t).forEach((t=>{const i=Manipulator.getDataAttribute(t,e);void 0===i&&t===document.body?t.style[e]="":(Manipulator.removeDataAttribute(t,e),t.style[e]=i)}))}_getScrollbarWidth(){const t=document.createElement("div");t.className="modal-scrollbar-measure",document.body.appendChild(t);const e=t.getBoundingClientRect().width-t.clientWidth;return document.body.removeChild(t),e}static jQueryInterface(t,e){return this.each((function(){let i=Data.get(this,DATA_KEY);const s={...Default,...Manipulator.getDataAttributes(this),..."object"==typeof t&&t?t:{}};if(i||(i=new Modal(this,s)),"string"==typeof t){if(void 0===i[t])throw new TypeError(`No method named "${t}"`);i[t](e)}}))}}EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,(function(t){const e=getElementFromSelector(this);"A"!==this.tagName&&"AREA"!==this.tagName||t.preventDefault(),EventHandler.one(e,EVENT_SHOW,(t=>{t.defaultPrevented||EventHandler.one(e,EVENT_HIDDEN,(()=>{isVisible(this)&&this.focus()}))}));let i=Data.get(e,DATA_KEY);if(!i){const t={...Manipulator.getDataAttributes(e),...Manipulator.getDataAttributes(this)};i=new Modal(e,t)}i.toggle(this)})),defineJQueryPlugin(NAME,Modal);export default Modal;
//# sourceMappingURL=/sm/0089072c0fb5cbfc574bb13df1272c430546f4a8f260e9fe3f34558648c0c920.map